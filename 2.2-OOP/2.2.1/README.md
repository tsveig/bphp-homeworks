# Задание 2.2.1 - Модель доступа к файлу

## Легенда
Для удобного доступа к содержимому файлов с данными принято решение реализовать модель доступа к json-файлу.

## Техническое задание
Требуется реализовать класс `JsonFileAccessModel` с возможностью доступа к содержимому файла формата JSON на основе низкоуровневого подхода.
`JsonFileAccessModel`:
-  Свойства:
   - `fileName` - protected;
   - `file` - protected;
-  Методы:
   - `connect()` - private;
   - `disconnect()` - private;
   - `read()` - public;
   - `write()` - public;
   - `readJson()` - public;
   - `writeJson()` - public.

## Рекомендации по выполнению
**Cтруктура проекта:** 
- index.php
- autoload.php
- classes/Singleton.php
- classes/JsonFileAccessModel.php
- config/SystemConfig.php

**Подсказки:**
1. Используйте функции для методов:
   - `fopen()` - для открытия потока чтения-записи;
   - `fread()` - для чтения содержимого файлов;
   - `fwrite()` - для записи в файл;
   - `filesize()` - для определения размера файла;
   - `fclose()` - для закрытия потока чтения-записи в файл.
2. В классе SystemConfig константа DATABASE_PATH должна отображать путь до директории с json-файлом.

**В задании требуется:**
1. Описать автозагрузку классов в файле autoload.php из директории classes с помощью функции `spl_autoload_register`(см. презентацию к лекции)
2. Использовать файлы [Singleton.php](classes/Singleton.php), [SystemConfig.php](config/SystemConfig.php).
3. В константу `DATABASE_PATH` класса `SystemConfig` прописать путь к директории с json-файлами.
4. Подключить файлы autoload.php и SystemConfig.php в начале файла index.php (именно в этом порядке)
5. В начале файла index.php должны быть подключены автозагрузка и настройки
6. Реализовать класс JsonFileAccessModel
7. Проверить его работоспособность: создать файл с JSON-объектом, в файле index.php создать экземпляр  класса и вывести на экран результат загрузки (например, с помощью `print_r`), сохранить JSON-объект в файл.

**Описание методов `JsonFileAccessModel`**
1. Конструктор (`__construct()`) объекта `JsonFileAccessModel` принимает как аргумент одну переменную - краткое наименование файла (без расширения), формирует полный путь к JSON-файлу и записывает ее в свойство `fileName`.
2. `connect()` - открывает поток записи/чтения в файл, записывает его в свойство `file`.
3. `disconnect()` - закрывает поток записи/чтения в файл.
4. `read()` - открывает поток записи/чтения, считывает файл, закрывает поток записи/чтения, возвращает результат - содержимое файла.
5. `write()` - метод открывает поток записи/чтения, очищает файл, производит запись в файл, закрывает поток записи/чтения. Принимает как аргумент текст, который требуется записать.
6. `readJson()` - аналогично read(), только метод возвращает результат - содержимое файла как JSON-объект.
7. `writeJson()` - аналогично write(), только метод принимает как аргумент JSON-объект. Желательно использование `JSON_PRETTY_PRINT` при кодировании в строку.

## Дополнительно, по желанию
Разделить класс `JsonFileAccessModel` на два:
- `FileAccessModel` - connect(), disconnect(), read() и write(). конструктор принимает как аргумент полный путь к файлу;
- `JsonFileAccessModel` - дочерний от `FileAccessModel`, поведение остается прежним, но из методов описаны в классе только readJson() и writeJson().